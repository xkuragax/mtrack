# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ mtrack –≤ –æ–±–ª–∞–∫–µ - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

## –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è

–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ–±–ª–∞—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è mtrack Multi-Track Audio Player —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

- **Frontend**: Vercel (React app)
- **Admin Panel**: Vercel (React app)
- **Backend**: Railway (Node.js + Express)
- **Database**: Neon (PostgreSQL)

–í—Å–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏ push –≤ GitHub.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway –¥–ª—è Backend

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª: `backend/railway.json`
```json
{
  "build": { "builder": "NIXPACKS" },
  "deploy": {
    "startCommand": "npm start",
    "healthcheckPath": "/health",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel –¥–ª—è Frontend –∏ Admin

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- `frontend/vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è frontend
- `admin/vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è admin panel

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–û–±–Ω–æ–≤–ª–µ–Ω `backend/src/server.js`:
```javascript
const corsOptions = {
  origin: process.env.CORS_ORIGIN
    ? process.env.CORS_ORIGIN.split(',').map(origin => origin.trim())
    : ['http://localhost:3000', 'http://localhost:3002'],
  credentials: true,
};
app.use(cors(corsOptions));
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è VITE_API_URL

–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:
- `frontend/vite.config.ts` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ VITE_API_URL
- `admin/vite.config.ts` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ VITE_API_URL
- `frontend/src/services/api.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `admin/src/services/api.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 5. –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ .env

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- `.env.example` - –æ–±—â–∏–π —à–∞–±–ª–æ–Ω
- `frontend/.env.example` - —à–∞–±–ª–æ–Ω frontend
- `admin/.env.example` - —à–∞–±–ª–æ–Ω admin
- `backend/.env.example` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å CORS_ORIGIN

### 6. –°–æ–∑–¥–∞–Ω–∏–µ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª: `.github/workflows/ci.yml`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ push
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ backend, frontend, admin

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–°–æ–∑–¥–∞–Ω—ã —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞:

**English:**
- `CLOUD_DEPLOYMENT.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (70+ —Ä–∞–∑–¥–µ–ª–æ–≤)
- `QUICK_START_CLOUD.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
- `DEPLOYMENT_CHECKLIST.md` - –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**Russian:**
- `–†–£–ö–û–í–û–î–°–¢–í–û_–†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

### 8. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç: `scripts/generate-secrets.js`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT_SECRET –¥–ª—è Railway
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–µ–π –ø–∞—Ä–æ–ª–µ–π –¥–ª—è admin
- SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

---

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è (5 –º–∏–Ω—É—Ç)

```bash
# 1. Neon - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å DATABASE_URL
# https://neon.tech

# 2. Railway - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å backend –∏–∑ GitHub
# https://railway.app
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
#   PORT=3001
#   NODE_ENV=production
#   DATABASE_URL=<–∏–∑-neon>
#   JWT_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å>
#   CORS_ORIGIN=https://*.vercel.app
# –ö–æ–Ω—Å–æ–ª—å: cd backend && npm run init-db

# 3. Vercel Frontend - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å frontend (root: frontend)
# https://vercel.com
# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: VITE_API_URL=<railway-url>
# Redeploy –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

# 4. Vercel Admin - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å admin (root: admin)
# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: VITE_API_URL=<railway-url>
# Redeploy –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

# 5. –ì–æ—Ç–æ–≤–æ! –¢—Ä–∏ —Ä–∞–±–æ—á–∏–µ —Å—Å—ã–ª–∫–∏
```

---

## üîó –ò—Ç–æ–≥–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ (–ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

```
Frontend:  https://mtrack-frontend.vercel.app
Admin:     https://mtrack-admin.vercel.app
API:       https://mtrack-api.railway.app
Database:  Neon Console
```

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (Railway)
```env
PORT=3001
NODE_ENV=production
DATABASE_URL=postgres://user:pass@host/db
JWT_SECRET=<—Å–ª—É—á–∞–π–Ω–∞—è-—Å—Ç—Ä–æ–∫–∞>
CORS_ORIGIN=https://*.vercel.app
```

### Frontend (Vercel)
```env
VITE_API_URL=https://mtrack-api.railway.app
```

### Admin (Vercel)
```env
VITE_API_URL=https://mtrack-api.railway.app
```

---

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏ push –≤ main:
```bash
git add .
git commit -m "–ò–∑–º–µ–Ω–µ–Ω–∏—è"
git push origin main
```

- **Railway** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç backend
- **Vercel** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç frontend
- **Vercel** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç admin

–ù–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π!

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:**
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —ç—Ñ–µ–º–µ—Ä–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ Railway
- –§–∞–π–ª—ã —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ (–ø–æ—Å–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

**–†–µ—à–µ–Ω–∏—è:**
- Railway Volume (–ø–ª–∞—Ç–Ω–æ, ~$5/–º–µ—Å—è—Ü)
- –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (AWS S3, Cloudinary)
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 2. –ü–∞—Ä–æ–ª—å admin –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ:**
- Username: `admin`
- Password: `admin123`

**–ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å:**
```sql
-- –í Neon SQL Editor
UPDATE admin_users
SET password_hash = '$2a$10$–Ω–æ–≤—ã–π-—Ö–µ—à'
WHERE username = 'admin';
```

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–∞:
```bash
node scripts/generate-secrets.js
```

### 3. CORS
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Vercel:
- –û–±–Ω–æ–≤–∏—Ç–µ CORS_ORIGIN –≤ Railway
- –£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–µ –¥–æ–º–µ–Ω—ã Vercel

---

## üìä –°—Ç–æ–∏–º–æ—Å—Ç—å

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –ë–ï–°–ü–õ–ê–¢–ù–û –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:**

| –°–µ—Ä–≤–∏—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å | –õ–∏–º–∏—Ç—ã |
|--------|-----------|--------|
| Vercel (x2) | $0 | 100GB/–º–µ—Å, –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è |
| Railway | $0-$10 | $5 –∫—Ä–µ–¥–∏—Ç–∞/–º–µ—Å—è—Ü |
| Neon | $0 | 0.5GB, 100 —á–∞—Å–æ–≤/–º–µ—Å |

**–ò—Ç–æ–≥–æ:** $0-$10/–º–µ—Å—è—Ü

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### Frontend
- [ ] –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ URL
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ª—å–±–æ–º–æ–≤
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä

### Admin
- [ ] –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ URL
- [ ] –ú–æ–∂–Ω–æ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º
- [ ] –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã

### Backend
- [ ] `/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] `/api/albums` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö Railway

### Database
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] Admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –ó–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `QUICK_START_CLOUD.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω) |
| `CLOUD_DEPLOYMENT.md` | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (EN) |
| `–†–£–ö–û–í–û–î–°–¢–í–û_–†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø.md` | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (RU) |
| `DEPLOYMENT_CHECKLIST.md` | –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| `README.md` | –û–±–Ω–æ–≤–ª–µ–Ω —Å —Ä–∞–∑–¥–µ–ª–æ–º –ø—Ä–æ –æ–±–ª–∞–∫–æ |

---

## üéØ –ü—Ä–∏–µ–º–∫–∞

‚úÖ **–¢—Ä–∏ —Ä–∞–±–æ—á–∏–µ —Å—Å—ã–ª–∫–∏** (Frontend, Admin, API)
‚úÖ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (git push = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
‚úÖ **Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞**
‚úÖ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (EN + RU)
‚úÖ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤**
‚úÖ **CI/CD –ø–∞–π–ø–ª–∞–π–Ω**

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –æ–±–ª–∞—á–Ω–æ–º—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –Ω–∞ Neon, Railway, Vercel
2. –°–ª–µ–¥–æ–≤–∞—Ç—å `QUICK_START_CLOUD.md` (5 –º–∏–Ω—É—Ç)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∏ —á–∞—Å—Ç–∏
4. –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å admin –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
5. –ù–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!

**–£–¥–∞—á–∏!** üöÄ
